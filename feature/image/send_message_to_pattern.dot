digraph send_message_to_pattern {
  
    // tweet.shop.ipad

    ipad [label = "tweet.shop.ipad"];
    ipad -> pattern [label = "match", dir = back];

    node [shape = box];
    ipad -> client3333 [label = "subscribe", dir = back];
    ipad -> client4444 [label = "subscribe", dir = back];
    ipad -> client5555 [label = "subscribe", dir = back];

    node [shape = plaintext];
    message [label = "PUBLISH tweet.shop.kindle message"];

    kindle [label = "tweet.shop.kindle", shape = ellipse];
    pattern [label = "tweet.shop.*", shape = octagon];

    message -> kindle [style = dashed];
    kindle -> pattern [style = dashed];

    node [shape = box];
    kindle -> clientX [style = dashed, label = "message"];
    kindle -> clientY [style = dashed, label = "message"];

    pattern -> client123 [style = dashed, label = "message"];
    pattern -> client256 [style = dashed, label = "message"];

}
