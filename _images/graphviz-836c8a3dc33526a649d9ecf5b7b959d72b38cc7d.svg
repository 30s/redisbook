<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.38.0 (20140413.2041)
 -->
<!-- Title: not_enque_command Pages: 1 -->
<svg width="480pt" height="453pt"
 viewBox="0.00 0.00 479.54 453.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 449.001)">
<title>not_enque_command</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-449.001 475.537,-449.001 475.537,4 -4,4"/>
<!-- command_in -->
<g id="node1" class="node"><title>command_in</title>
<polygon fill="lightgrey" stroke="none" points="391.591,-445.001 193.591,-445.001 193.591,-409.001 391.591,-409.001 391.591,-445.001"/>
<text text-anchor="middle" x="292.591" y="-423.011" font-family="'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'" font-size="14.00">服务器接到来自客户端的命令</text>
</g>
<!-- in_transaction_or_not -->
<g id="node2" class="node"><title>in_transaction_or_not</title>
<polygon fill="#95bbe3" stroke="black" points="292.591,-372.001 113.699,-354.001 292.591,-336.001 471.483,-354.001 292.591,-372.001"/>
<text text-anchor="middle" x="292.591" y="-350.011" font-family="'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'" font-size="14.00">客户端是否正处于事务状态？</text>
</g>
<!-- command_in&#45;&gt;in_transaction_or_not -->
<g id="edge1" class="edge"><title>command_in&#45;&gt;in_transaction_or_not</title>
<path fill="none" stroke="black" stroke-width="2" d="M292.591,-408.814C292.591,-400.791 292.591,-391.049 292.591,-382.07"/>
<polygon fill="black" stroke="black" stroke-width="2" points="296.091,-382.03 292.591,-372.03 289.091,-382.03 296.091,-382.03"/>
</g>
<!-- not_exec_and_discard -->
<g id="node3" class="node"><title>not_exec_and_discard</title>
<polygon fill="#ffc1c1" stroke="black" points="151.591,-280.639 -0.0908748,-224.165 151.591,-167.691 303.273,-224.165 151.591,-280.639"/>
<text text-anchor="middle" x="151.591" y="-237.083" font-family="'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'" font-size="14.00">命令是否</text>
<text text-anchor="middle" x="151.591" y="-222.663" font-family="'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'" font-size="14.00">EXEC 、 DISCARD 、</text>
<text text-anchor="middle" x="151.591" y="-205.755" font-family="'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'" font-size="14.00">MULTI 或 WATCH ？</text>
</g>
<!-- in_transaction_or_not&#45;&gt;not_exec_and_discard -->
<g id="edge2" class="edge"><title>in_transaction_or_not&#45;&gt;not_exec_and_discard</title>
<path fill="none" stroke="black" stroke-width="2" d="M275.583,-337.581C257.583,-321.262 228.299,-294.711 202.708,-271.51"/>
<polygon fill="black" stroke="black" stroke-width="2" points="205.011,-268.874 195.252,-264.75 200.31,-274.06 205.011,-268.874"/>
<text text-anchor="middle" x="258.591" y="-306.801" font-family="Times,serif" font-size="14.00">是</text>
</g>
<!-- exec_command -->
<g id="node6" class="node"><title>exec_command</title>
<polygon fill="#fadcad" stroke="none" points="375.591,-112.328 303.591,-112.328 303.591,-76.3282 375.591,-76.3282 375.591,-112.328"/>
<text text-anchor="middle" x="339.591" y="-90.3382" font-family="'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'" font-size="14.00">执行命令</text>
</g>
<!-- in_transaction_or_not&#45;&gt;exec_command -->
<g id="edge5" class="edge"><title>in_transaction_or_not&#45;&gt;exec_command</title>
<path fill="none" stroke="black" stroke-width="2" d="M297.791,-336.42C302.224,-321.797 308.51,-299.85 312.591,-280.401 324.224,-224.962 332.541,-159.137 336.659,-122.826"/>
<polygon fill="black" stroke="black" stroke-width="2" points="340.175,-122.874 337.801,-112.549 333.217,-122.101 340.175,-122.874"/>
<text text-anchor="middle" x="338.591" y="-222.765" font-family="Times,serif" font-size="14.00">否</text>
</g>
<!-- enqueu_command -->
<g id="node4" class="node"><title>enqueu_command</title>
<polygon fill="#a8e270" stroke="none" points="209.591,-112.328 53.5908,-112.328 53.5908,-76.3282 209.591,-76.3282 209.591,-112.328"/>
<text text-anchor="middle" x="131.591" y="-90.3382" font-family="'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'" font-size="14.00">将命令放进事务队列里</text>
</g>
<!-- not_exec_and_discard&#45;&gt;enqueu_command -->
<g id="edge3" class="edge"><title>not_exec_and_discard&#45;&gt;enqueu_command</title>
<path fill="none" stroke="black" stroke-width="2" d="M143.341,-170.431C140.751,-153.879 138,-136.295 135.811,-122.305"/>
<polygon fill="black" stroke="black" stroke-width="2" points="139.263,-121.723 134.259,-112.384 132.347,-122.805 139.263,-121.723"/>
<text text-anchor="middle" x="147.591" y="-138.728" font-family="Times,serif" font-size="14.00">否</text>
</g>
<!-- not_exec_and_discard&#45;&gt;exec_command -->
<g id="edge4" class="edge"><title>not_exec_and_discard&#45;&gt;exec_command</title>
<path fill="none" stroke="black" stroke-width="2" d="M204.46,-187.215C237.038,-165.062 277.826,-137.327 306.022,-118.154"/>
<polygon fill="black" stroke="black" stroke-width="2" points="308.044,-121.012 314.345,-112.495 304.108,-115.223 308.044,-121.012"/>
<text text-anchor="middle" x="291.591" y="-138.728" font-family="Times,serif" font-size="14.00">是</text>
</g>
<!-- return_enqueued -->
<g id="node5" class="node"><title>return_enqueued</title>
<polygon fill="#a8e270" stroke="none" points="226.889,-39.4938 20.2929,-39.4938 20.2929,0.165505 226.889,0.165505 226.889,-39.4938"/>
<text text-anchor="middle" x="123.591" y="-24.1282" font-family="'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'" font-size="14.00">向客户端返回 QUEUED 字符串</text>
<text text-anchor="middle" x="123.591" y="-7.21998" font-family="'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'" font-size="14.00">表示命令已入队</text>
</g>
<!-- enqueu_command&#45;&gt;return_enqueued -->
<g id="edge7" class="edge"><title>enqueu_command&#45;&gt;return_enqueued</title>
<path fill="none" stroke="black" stroke-width="2" d="M129.695,-76.1079C128.825,-68.2047 127.769,-58.6149 126.782,-49.6483"/>
<polygon fill="black" stroke="black" stroke-width="2" points="130.243,-49.1037 125.67,-39.5468 123.285,-49.8698 130.243,-49.1037"/>
</g>
<!-- return_command_result -->
<g id="node7" class="node"><title>return_command_result</title>
<polygon fill="#fadcad" stroke="none" points="442.591,-37.6641 244.591,-37.6641 244.591,-1.66412 442.591,-1.66412 442.591,-37.6641"/>
<text text-anchor="middle" x="343.591" y="-15.6741" font-family="'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'" font-size="14.00">向客户端返回命令的执行结果</text>
</g>
<!-- exec_command&#45;&gt;return_command_result -->
<g id="edge6" class="edge"><title>exec_command&#45;&gt;return_command_result</title>
<path fill="none" stroke="black" stroke-width="2" d="M340.539,-76.1079C341.002,-67.6919 341.571,-57.3633 342.091,-47.9114"/>
<polygon fill="black" stroke="black" stroke-width="2" points="345.595,-47.9382 342.65,-37.7609 338.605,-47.5534 345.595,-47.9382"/>
</g>
</g>
</svg>
